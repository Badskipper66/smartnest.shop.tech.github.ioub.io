<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Settings - My E-Commerce Store</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=settings" />
</head>
<body>
  <header>
    <div class="container header-container">
      <a href="index.html"><img src="images/LOGO 03.png" alt="Company Logo" class="logo" /></a>
      <nav class="main-nav">
        <ul class="nav-list">
          <li><a href="index.html">Home</a></li>
          <li><a href="product.html">Products</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="account.html">Account</a></li>
          <li><a href="cart.html">Cart</a></li>
          <li><a href="recruit.html">Recruit</a></li>
          <li><a href="setting.html" class="active">Settings</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="settings-container">
    <h1>Customer Settings</h1>

    <div class="setting-group">
      <label for="theme-color">Theme Color</label>
      <input type="color" id="theme-color" name="theme-color" value="#007bff" />
    </div>

    <div class="setting-group">
      <label>Notification Preferences</label>
      <label class="checkbox-label">
        <input type="checkbox" id="email-notifications" />
        Email Notifications
      </label>
      <label class="checkbox-label">
        <input type="checkbox" id="sms-notifications" />
        SMS Notifications
      </label>
      <label class="checkbox-label">
        <input type="checkbox" id="push-notifications" />
        Push Notifications
      </label>
    </div>

    <div class="setting-group">
      <label for="language-select">Language</label>
      <select id="language-select" name="language-select">
        <option value="en" selected>English</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="zh">Chinese</option>
      </select>
    </div>

    <div class="setting-group">
      <label class="checkbox-label">
        <input type="checkbox" id="privacy-mode" />
        Enable Privacy Mode
      </label>
    </div>

    <div class="setting-group">
      <label for="country-select">Country</label>
      <select id="country-select" name="country-select">
        <option value="US" data-currency="₵">Ghana</option>
        <option value="CA" data-currency="CAD$">Canada</option>
        <option value="GB" data-currency="£">United Kingdom</option>
        <option value="AU" data-currency="AUD$">Australia</option>
        <option value="DE" data-currency="€">Germany</option>
        <option value="FR" data-currency="€">France</option>
        <option value="IN" data-currency="₹">India</option>
        <option value="JP" data-currency="¥">Japan</option>
        <option value="CN" data-currency="¥">China</option>
        <option value="BR" data-currency="R$">Brazil</option>
        <option value="ZA" data-currency="R">South Africa</option>
        <option value="MX" data-currency="$">Mexico</option>
        <option value="RU" data-currency="₽">Russia</option>
        <option value="IT" data-currency="€">Italy</option>
        <option value="ES" data-currency="€">Spain</option>
        <option value="NL" data-currency="€">Netherlands</option>
        <option value="KR" data-currency="₩">South Korea</option>
        <option value="SE" data-currency="kr">Sweden</option>
        <option value="CH" data-currency="CHF">Switzerland</option>
        <option value="SG" data-currency="S$">Singapore</option>
        <option value="GH" data-currency="$">United States</option>
      </select>
    </div>

    <div class="setting-group">
      <label for="currency-select">Currency</label>
      <select id="currency-select" name="currency-select">
        <option value="₵">GHS (₵)</option>
        <option value="CAD$">CAD ($)</option>
        <option value="£">GBP (£)</option>
        <option value="AUD$">AUD ($)</option>
        <option value="€">EUR (€)</option>
        <option value="₹">INR (₹)</option>
        <option value="¥">JPY (¥)</option>
        <option value="R$">BRL (R$)</option>
        <option value="R">ZAR (R)</option>
        <option value="₽">RUB (₽)</option>
        <option value="₩">KRW (₩)</option>
        <option value="kr">SEK (kr)</option>
        <option value="CHF">CHF</option>
        <option value="S$">SGD (S$)</option>
        <option value="$">USD ($)</option>
      </select>
    </div>

    <button class="save-btn" id="save-settings">Save Settings</button>

    <div class="setting-group" style="margin-top: 40px;">
      <button id="feedback-button" class="save-btn" style="background-color: #28a745;">Give Feedback</button>
    </div>

    <div id="feedback-form-container" style="display:none; margin-top: 20px; background: #f9f9f9; padding: 20px; border-radius: 10px;">
      <h2>Customer Feedback</h2>
      <form id="feedback-form">
        <label for="feedback-text">Describe your challenges:</label>
        <textarea id="feedback-text" name="feedback-text" rows="5" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc;" required></textarea>
        <button type="submit" class="save-btn" style="margin-top: 15px; background-color: #007bff;">Submit Feedback</button>
        <button type="button" id="cancel-feedback" class="save-btn" style="margin-top: 15px; background-color: #dc3545; margin-left: 10px;">Cancel</button>
      </form>
    </div>
  </main>
  <footer>
    <div class="container">
      <img src="images/LOGO 03.png" alt="Footer Logo" class="footer-logo" />
      <p>&copy; 2025 Smart Nest | Tech Store. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Load saved settings from localStorage
    function loadSettings() {
      const themeColor = localStorage.getItem('themeColor') || '#007bff';
      const emailNotif = localStorage.getItem('emailNotifications') === 'true';
      const smsNotif = localStorage.getItem('smsNotifications') === 'true';
      const pushNotif = localStorage.getItem('pushNotifications') === 'true';
      const language = localStorage.getItem('language') || 'en';
      const privacyMode = localStorage.getItem('privacyMode') === 'true';

      const savedCountry = localStorage.getItem('country') || 'US';
      const savedCurrency = localStorage.getItem('currency') || '$';

      document.getElementById('theme-color').value = themeColor;
      document.getElementById('email-notifications').checked = emailNotif;
      document.getElementById('sms-notifications').checked = smsNotif;
      document.getElementById('push-notifications').checked = pushNotif;
      document.getElementById('language-select').value = language;
      document.getElementById('privacy-mode').checked = privacyMode;

      document.getElementById('country-select').value = savedCountry;
      document.getElementById('currency-select').value = savedCurrency;

      applyThemeColor(themeColor);
    }

    // Save settings to localStorage
    function saveSettings() {
      const themeColor = document.getElementById('theme-color').value;
      const emailNotif = document.getElementById('email-notifications').checked;
      const smsNotif = document.getElementById('sms-notifications').checked;
      const pushNotif = document.getElementById('push-notifications').checked;
      const language = document.getElementById('language-select').value;
      const privacyMode = document.getElementById('privacy-mode').checked;

      const country = document.getElementById('country-select').value;
      const currency = document.getElementById('currency-select').value;

      localStorage.setItem('themeColor', themeColor);
      localStorage.setItem('emailNotifications', emailNotif);
      localStorage.setItem('smsNotifications', smsNotif);
      localStorage.setItem('pushNotifications', pushNotif);
      localStorage.setItem('language', language);
      localStorage.setItem('privacyMode', privacyMode);

      localStorage.setItem('country', country);
      localStorage.setItem('currency', currency);

      applyThemeColor(themeColor);
      alert('Settings saved successfully!');
    }

    // Apply theme color dynamically
    function applyThemeColor(color) {
      document.documentElement.style.setProperty('--primary-color', color);
      // Also update buttons and links if needed
      const btns = document.querySelectorAll('.btn, .save-btn, nav ul li a.active, nav ul li a:hover');
      btns.forEach(btn => {
        btn.style.backgroundColor = color;
      });
    }

    // Update currency dropdown when country changes
    document.getElementById('country-select').addEventListener('change', function() {
      const selectedOption = this.options[this.selectedIndex];
      const currency = selectedOption.getAttribute('data-currency');
      const currencySelect = document.getElementById('currency-select');
      currencySelect.value = currency;
    });

    document.getElementById('save-settings').addEventListener('click', saveSettings);

    // Feedback button and form handling
    const feedbackButton = document.getElementById('feedback-button');
    const feedbackFormContainer = document.getElementById('feedback-form-container');
    const feedbackForm = document.getElementById('feedback-form');
    const cancelFeedbackBtn = document.getElementById('cancel-feedback');

    feedbackButton.addEventListener('click', () => {
      feedbackFormContainer.style.display = 'block';
      feedbackButton.style.display = 'none';
    });

    cancelFeedbackBtn.addEventListener('click', () => {
      feedbackFormContainer.style.display = 'none';
      feedbackButton.style.display = 'block';
      feedbackForm.reset();
    });

    feedbackForm.addEventListener('submit', e => {
      e.preventDefault();
      const feedbackText = document.getElementById('feedback-text').value.trim();
      if (!feedbackText) {
        alert('Please describe your challenges before submitting.');
        return;
      }
      // Simulate sending feedback to company email and phone
      alert(`Thank you for your feedback! It has been sent to smartnest.shop.org and +233236541077.`);
      feedbackForm.reset();
      feedbackFormContainer.style.display = 'none';
      feedbackButton.style.display = 'block';
    });

    window.addEventListener('DOMContentLoaded', loadSettings);
  </script>
</body>
</html>
